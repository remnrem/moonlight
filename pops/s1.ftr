
% --------------------------------------------------------------------------------
% Declare any channels used (required), sample rates
% --------------------------------------------------------------------------------

% trained channel label = generic 'CEN'

%CH CEN EEG_C4_M1 EEG_C4_A1 C4_A1 C4_M1 C4 C4.M1 C4-M1 C4.A1 C4_A1 C4-A1 EEG_C3_M2 EEG_C3_A2 C3_A2 C3_M2 C3 C3.M2 C3-M2 C3.A2 C3_A2 C3-A2 128 uV
CH CEN 128 uV


% --------------------------------------------------------------------------------
% Level 1 features
%  block : feature {key=value key=value}
% --------------------------------------------------------------------------------

% full relative power spectra, up to 35 Hz 
spec1:  RSPEC  CEN lwr=0.75 upr=25 z-lwr=0.75 z-upr=25
spec2:  SPEC  CEN lwr=0.75 upr=25 

misc1: SKEW     CEN 
misc1: KURTOSIS CEN
misc1: FD       CEN
misc1: HJORTH   CEN

% --------------------------------------------------------------------------------
% Epoch/row exclusions based on level-1 features
% --------------------------------------------------------------------------------

misc1: OUTLIERS th=10

% --------------------------------------------------------------------------------
% Level 2 features: 
%  to-block: feature block=from-block {key=value}
% --------------------------------------------------------------------------------

% SVD - in trainer mode, writes SVD solution (based on all individuals)
%     - in test mode, reads this back to project individual subjects

spec1.svd:  SVD block=spec1 nc=6 file=s1.spec1.svd
spec2.svd:  SVD block=spec2 nc=6 file=s1.spec2.svd

% --------------------------------------------------------------------------------
% Normalize all measures
% --------------------------------------------------------------------------------

zmisc1: NORM block=misc1
zspec1.svd: NORM block=spec1.svd
zspec2.svd: NORM block=spec2.svd

% --------------------------------------------------------------------------------
% Temporal smoothing
% --------------------------------------------------------------------------------

zspec1.svd.denoised: DENOISE block=zspec1.svd lambda=0.5
zspec2.svd.denoised: DENOISE block=zspec2.svd lambda=0.5
zmisc1.denoised: DENOISE block=zmisc1 lambda=0.5

zspec1.svd.smoothed: SMOOTH block=zspec1.svd half-window=10
zspec2.svd.smoothed: SMOOTH block=zspec2.svd half-window=10
zmisc1.smoothed: SMOOTH block=zmisc1 half-window=10

% --------------------------------------------------------------------------------
% Time track
% --------------------------------------------------------------------------------

time1: TIME 

% --------------------------------------------------------------------------------
%
% Final feature selection (blocks as defined above)
%
% --------------------------------------------------------------------------------

SELECT zspec1.svd zspec2.svd misc1
SELECT zspec1.svd.denoised zspec2.svd.denoised zmisc1.denoised
SELECT zspec1.svd.smoothed zspec2.svd.smoothed zmisc1.smoothed
SELECT time1

